%!TEX root = ../thesis.tex
\begin{savequote}[90mm]
	Scrum means ``Waterfall but we don't have time for analisys''\\
	Kanban means ``Scrum, but we don't have time for Sprint planning''\\
	Agile means ``We have no process but we do use Jira extensively''
	\qauthor{\href{https://twitter.com/mikeveerman}{@mikeveerman} on Twitter}
\end{savequote}

\chapter{Projet implementation}
\label{chapter_5}
	This chapter is the core of this document and describes the way that this project has been implemented according to the planning described in \Chapref{chapter_2}.\\
	It is structured in four main sections that go over the main time periods presented in the Piano di lavoro document.\\
	Since the scope of the project was to create a demo environment to show the capabilities of Jira, Athonet has bought ten user licenses for Jira Software, ten for Service Desk and ten for Confluence.\\
	As described in Atlassian's documentation\cite{compare-atlassian-cloud-vs-server}, these tools have three installation options:
	\begin{itemize}
		\item \textbf{Cloud}: hosted on their infrastructure
		\item \textbf{Server}: download and install on a local network
		\item \textbf{Data Center}: download and install for a large infrastructure
	\end{itemize}
	Because of Athonet's policies about storing internal data in the cloud, the IT department opted for an on premise, Server, installation.
	This kind of installment requires a one time payment for the software while the subsequent fees will be for support.
\section{Learning phase}
	This phase corresponds to the first two weeks of the internship.
	As described in the \Quote{Piano di Lavoro}, the main task in this first period  was to understand what the tools are and what they can do.
	The first important thing to do was to acquire knowledge on Jira and Confluence by researching them on the Internet.
	The first one I have started researching was Jira, this brought me to the official documentation\cite{jira_docu}, which is very well organized.
	\begin{figure}[H]
		\centering
		\includegraphics[width=1\textwidth]{resources/jira_documentation}\\
		\caption[Screenshot from Jira's Documentation page]{Screenshot of the sections from Jira's Documentation homepage from the Atlassian Support website}
	\end{figure}
	It is very easy to navigate because it's versioned for each release, major and minor, of the software, plus it contains links to related pages, including Confluence's documentation and Atlassian's blog.
	As said in \ref{sec:atlassian_community} both Jira and Confluence have a bug reporting and issue tracking section in their documentation.
	If a web page is related to an issue, this is showed at the end of the page with its status and a link to its dedicated section.\\
	The Confluence and Jira documentation are both written and hosted using a Confluence instance, showing how powerful can be this tool for handling a wiki for such a complex software that has a large userbase.\\
	Confluence's documentation is structured like Jira's, easy to access and consult, other than being public and free to read, despite the software are not.\\
	The second half of the first week was dedicated to configuring the environment.
	The IT department has chosen to create an instance of the Atlassian's software on a \gls{CentOS}\glsadd{CentOS} \gls{Virtual Machine}\glsadd{Virtual Machine} (VM) with 512GB of storage and 32GB of RAM, connected to a special testing network domain for internship students.
	The \gls{Remmina}\glsadd{Remmina} was used to remotely connect to the given VM.
	\begin{figure}[H]
		\centering
		\includegraphics[width=.5\textwidth]{resources/centos_logo}\\
		\caption{Logo of the CentOS Linux distribution}
	\end{figure}
	
\section{Initial installation and configuration}	

	Since the exhaustiveness of the documentation, the installation phase was anticipated so that there could be a more hands on approach.
	As for the previous phase, the installation of Jira was done by following the dedicated article on the official documentation\cite{installing-jira-applications-on-linux}.	
	\begin{figure}[H]
		\centering
		\includegraphics[width=.9\textwidth]{resources/jira_installation}\\
		\caption{Screenshot from the installation page of Jira in Atlassian's documentation}
	\end{figure}
	To store all the information regarding projects, users, etc., Jira needs a database.
	For the first installation, intended to be used in a testing manner, the embedded \gls{H2 database}\glsadd{H2 database} was enough.
	It's important to note that the documentation says the H2 database is not suitable for production environments\cite{accessing-jira-s-h2-embedded-database}.
	The first thing done after the installation was getting acquainted with the interface and understanding ho Jira's components interconnect with each other.\\
	In order to do this it was necessary creating some mock projects and filling them with issues.
	Here is where the concept of Board come out in Jira.\\
	Boards and workflows are very tied notions.
	Experimenting with workflows was one of the most important things to do, because these are fundamental in an Issue Tracking System's configuration and are strictly connected to Boards.
	\begin{figure}[H]
		\centering
		\makebox[\textwidth][c]{\includegraphics[width=1.2\textwidth]{resources/UntitledA}}%
		\caption{Kanban board from a Jira project}
	\end{figure}
	Installing Portfolio was the step that came after understanding the fundamentals of Jira and getting to know its basic features.
	This plugin, as told in \ref{subsec:portfolio} helps visualizing the issues on a roadmap, which was one of the most important requirements: \textit{O05}.\\
	As per the previous installation, Portfolio's was done by downloading and embedding the binary into Jira's instance.
	\begin{figure}[H]
		\centering
		\includegraphics[width=\textwidth]{resources/portfolio}\\
		\caption[Screenshot of project in Jira Portfolio]{Screenshot of project in Jira Portfolio\cite{portfolio}}
	\end{figure}
	After installing this plugin and creating plans for the previously created mock up projects, the next software installed was Jira Service Desk, to complete the configuration of the Jira instance.
	As described in \ref{subsec:service_desk} this piece of software is mostly used to communicate with the clients and having a portal from which a user can find information and request assistance with a product.
	In Jira Service Desk, the customer portal is the site where customers file and track requests.\\
	After installing this software, the first thin to do was creating a \Quote{Help Center} to see from the client's point of view how it can be able to open an issue and what types he may have access to.
	\begin{figure}[H]
		\centering
		\includegraphics[width=\textwidth]{resources/Annotation2019-07-24170249}\\
		\caption{A Jira Service Desk portal}
	\end{figure}
	The installation of Confluence came after understanding all the basics of Jira and becoming familiar with it.
	For the newly installed software the H2 database was enough as for the previous one.
	Both software run on the same system, and their services are offered on port 8080 and 8090 respectively for Jira and Confluence via HTTP protocol.\\
	During the installation of Confluence, the install wizard program allowed me to insert all data of the Jira instance in order to connect them.
	A knowledge base for the Service Desk project and a documentation space for the Software project have been generated in order to test the connection.\\
	To allow a better integration between these tools, Atlassian allows to have a single database table containing the users information stored on either one of Jira or Confluence's instances.\\
	This was shown during the installation of Confluence as an option to link it with Jira's instance was presented by asking for the administrative credentials for connecting to the database and using Jira's users.
	Jira and Confluence both use the open source Apache Tomcat web server.
	This particular web server has issues regarding the login when both software run on the same IP address: each program stores \gls{cookies}\glsadd{Cookie} to allow users to log in without inserting each time username and password.
	On each log in though, users were automatically logged out of the system almost immediately.
	After a research on the Internet I found a post\cite{user-is-constantly-logged-out-of-jira} in Atlassian's blog regarding this problem: the answer was that when run on the same IP address, cookies from Jira and Confluence go in conflict.
	This post was associated with a more detailed issue\cite{JRASERVER-36960} in Jira's own portal.\\
	The solution to this problem was to change the \gls{context path}\glsadd{Context Path} of both applications\cite{how-to-change-the-jira-application-context-path} in the \Quote{server.xml} file that contains the configuration of the web server.
	An example of changing the context path is:
	\begin{center}
		\texttt{http://yourdomain.com:8080}
	\end{center}
	\vspace{-10pt}
	becomes:
	\vspace{-10pt}
	\begin{center}
		\texttt{http://yourdomain.com:8080\textbf{/jira}}
	\end{center}
	For Confluence, where the default port is 8090, the context path would become:
	\begin{center}
		\texttt{http://yourdomain.com:8090\textbf{/confluence}}
	\end{center}
	Contrary to what was said in the beginning, the tutor had communicated me that the IT department opted to maintain for using GitLab\cite{gitlab} instead of installing BitBucket\cite{bitbucket}, another Atlassian software.	
	This because GitLab was already in use by the developers, so they would not need to learn a new software that could affect their work routine.
	\begin{figure}[H]
		\centering
		\includegraphics[width=.5\textwidth]{resources/glan}\\
		\caption{GitLab Logo}
	\end{figure}
	Connecting these tools together means that a developer can interact with Jira's issues from a GitLab project by typing it's ID in the messages that he uses for commits, comments, merge requests and so on.
	GitLab's documentation has a dedicated page with instructions, examples and a guide that allow configuring both tools\cite{integrations}.\\
	This functionality allows GitLab to interact with Jira's default workflows, which sometimes are too simple for some software projects.\\
	Since the license for GitLab's hosted version is not \Quote{Premium} (or \Quote{Silver} for the online one) there is no interaction the other way around, from Jira to the repository\cite{jira_development_panel}.
	Since these tools are not strictly related, there is no direct project mapping from GitLab to Jira, a commit message in the repository may reference multiple Jira issues from different projects, so it's the programmer's discretion to comment wisely.
	%todo aggiungere riferimento
	\hl{Later ... I will talk about installing a plugin that allows these tools to be better connected.}\\
	A demo that touched all the previously viewed arguments was set in place for showing the progress made to the tutor.	
	Because his availability at the moment was very little, from the time the meeting was set to the actual moment of it happened, the interface of the system was customized by adding the colors of the company and its logo.
	\begin{figure}[H]
		\centering
		\includegraphics[width=\textwidth]{resources/jira_custom}\\
		\caption{Custom menu interface for Jira}
	\end{figure}
	\vspace{-.5cm}
	\begin{figure}[H]
		\centering
		\includegraphics[width=.85\textwidth]{resources/confluence_custom}\\
		\caption{Custom menu interface for Confluence}
	\end{figure}
	During the meeting, the tutor liked the progress that was made and asked for more elaborate mock projects for presenting the tools' combined functionalities to other company figures.\\
	The projects registered until that moment in Jira and their related spaces in Confluence were deleted and, as hinted in \ref{sec:time_planning}, a snapshot of the VM hosting the software was taken.\\
	Until this point the completely fulfilled objectives were: \textit{O01}, \textit{O02}, \textit{O05}, \textit{D03}.\\
	Although the connection between Jira and GitLab was established, to fulfill O04 it was required that GitLab supported custom workflows for Jira Software projects.
	
\section{First realistic mock projects and feedback}
	The fourth week of the internship I was ready to implement more realistic projects in Jira, connecting them to Confluence providing them with documentation and creating a link with GitLab.
	The objective was to finalize the working demo that could be shown to various members of Athonet for them to understand how these software can be used in their departments.\\
	In Jira I have created the projects EPC and Dashboard, both Software, while in Confluence I have created the spaces EPC Documentation and Dashboard Documentation.
	Also in Jira I have created an Athonet Internal Wiki project, to show how Service Desk could be useful for sharing internal documents between employees.\\
	For the first project I have implemented a more articulate workflow that resembles the realistic evolution of an issue inside the company and customized the menus that allow the creation of an issue.
	
	%todo inserire immagine workflow
	
	Later these will be revised because in this stage I was not given the information about what an issue requires to have in Athonet's case.\\	
	As I continued working on the mock projects and creating issues, I noted down all the most important customization that an administrative user can use to set up the software, not only for Athonet's specific purposes but in general.\\	
	To make the project more realistic I have created three user groups, besides the default ones, to which I have assigned three users each:
	\begin{itemize}
		\item Management
		\item Verification
		\item Developers
	\end{itemize}
	%todo va bene ;?
	Every group had various permissions; this allowed me to demonstrate how basic security rules work in these tools.\\
	After telling the progress I have made to the tutor, he was able to set me a meeting with himself and the verification and developer managers.
	%todo aggiungere riferimento
	I then prepared some slides to explain some of the nomenclature in Jira, as explained in ..., and the various things that I have implemented.\\
	The core of this meeting was a discussion between the managers focused on understanding how their ongoing projects could be implemented in such a way that the employees would not be forced into using a strict Agile methodology, but to accommodate and let them understand how these tools work without creating chaos.\\
	There was a discussion on how applying a strict Agile methodology could impact their time division.
	Agile provides sprints that by definition last two weeks.
	These produce deliverables that bring added value to the project.
	Athonet's line of work though is focused on adding value to the product upon new releases that are scheduled differently by their purpose:
	\begin{itemize}
		\item Bug fix
		\item Minor release (for patching issues with the code or to improve performance)
		\item Major release (for new features)
	\end{itemize}
	Sprints would disrupt the routines of the developer team, the verification team and of management.
	In this case it would not be the tool that adapt to the company but vice versa the company would need to change in order to use the tool and would be counterproductive.\\
	The developer manager stated that he wanted a way to measure productivity, so I showed him the reports section that is present for all kind of Jira projects.
	
	%todo inserire immagine reports
	
	Since he was not keen on the strict Agile interface with the backlog composed only by the issues that were meant to be completed in a two week period, he wanted me to show how the kanban board looked like.
	
	%todo inserire immangine board
	
	He said that it would be better for the company's way of work since developers could program their work based on what has to be completed for the next release, so for a longer period of time.\\	
	This implied there would be a more particular workflow that had to be implemented and the managers were happy to see that it could be easily done, as for customizing the issue creation and modification menu.\\
	They were also happy about the Internal wiki project because it suggested there could be one single tool for both internal documentation regarding clients and general notes for employees (like for example a guide on how to install Docker without loosing internet connectivity).\\	
	After this meeting, I was put on standby because of the internal discussions that had to be done in order for the managers to understand how to adapt the workflow they had in Redmine for Jira and how to include Confluence in the mix.
	This was not considered when writing the piano di lavoro document, but to carry on with the work I decided to start writing the documentation about installing and configuring the software, aimed for the system administrators in the IT department.
	In the sixth week I showed it to the tutor and, after his approval, I started working on the user guide, which was written in the wiki Confluence space.
	In order for the users to understand how to use the tools, they had to start using them.
	
	%todo ci sta veramente come parte? alla fine ok ho fatto ma non verrà mai usata come cosa
%	There was an issue I noticed that would not allow unlicensed users, to enter the wiki.
	
	%todo project e product quoted 
	Later on, a new meeting was scheduled with the product owner, who wanted to understand better Portfolio and how the concept of product matches the project denomination in Jira.
	
	%todo citare
	%https://harbott.com/whats-the-difference-between-a-product-and-a-project-aaacfc983340
	Project and product sound similar and the two concepts are often confused with each other.
	A project is a temporary endeavour, with a clear definition of what needs to be delivered and by when, it has a beginning and end date.
	A product is designed to continually create value for customers by solving their problems.\\
	For the product owner, one of the most important things was to see how releases are mapped inside the software, since Redmine did not offer such an intuitive interface and did not allow to see them on a timeline and applying custom filters.
	I showed him the progress I have made and he approved it, also he said that he wanted the credentials to start using it and see how to map the ongoing projects in Redmine to new ones in Jira or how to migrate them.\\
	After using it for a couple of days and talking with the other managers, I was given a feedback on how Athonet would use these tools.
	Since they were not sure letting users access Service Desk directly, an employee would create an issue that would represent the customer request through service desk.
	The customer request could be a new feature, a bug report, require support, etc.
	This would then be picked up by a team that would bring it inside a Business type of project by creating a linked issue.
	This project would have a particular workflow and contains the more high lever tasks like documentation, meeting notes, feature statuses, etc.
	These shared notes and documents would be stored in Confluence, where there would be links to them.\\
	After they have been approved for production another team would create a linked issue inside the software project.
	This would most likely be divided in many sub-issues by the team leader and these would be visible by the developers.
	Each developer could then pick an issue to work on and handle it as he wants by, for example, dividing it in smaller sub-issues.\\
	The next week I had another meeting with more company figures: a senior developer, the business strategy manage, the managers that I have talked to in previous meetings, the CTO and my tutor.
	As in the other meetings I have explained the various software that I have installed, the purpose for each one of them and the evolution of an issue.\\	
	Again, to have a milestone, I have requested a snapshot of the machine by the IT department.
	Even with the requirements changes I was on schedule with the Gantt diagram and the other planning.

\section{Transitioning into Production and final feedback}

	Although in the first planning this was a longer period of time, this last phase was shortened to a week.
	%todo subordinates va bene?
	This was due because of the many internal discussions that took place for the software to be approved and for the various managers of the departments to figure out how to introduce it to their subordinates.\\
	After the last meeting described in the previous paragraph, I have created new users for the managers that participated and gave them the credentials so that they could see the interface and interact with the mock projects that remained there.\\
	The tutor had credentials as well and he was very enthusiast of how the demo performed and the potentials of the software, although this had to be well understood by the other managers and members of the company as well.\\
	Although the last snapshot of the VM that was made contained a working infrastructure ready to be moved in a production environment, the IT department opted to wait until they understood how to properly secure the server that was going to host it.
	%todo aggiungere VPN a glossario
	The most important part would be creating a secure VPN tunnel that would allow outside employees that are working from other locations to connect as they would be inside the building.
	This method must ensure thought that there would be no possibility for any other to get, or even hack, inside the company's network and access their products' source code.
	Besides this, the other managers where very glad to hear that the tools have been approved and where happy about the demonstration.\\
	%todo rivedere bene
	Because this, I was not able to migrate any data from Redmine's instance to Jira, since I was not granted permission to access the company's private data about the source code and even if the migration would have been successful it would have not been used when Jira and Confluence were moved into production.
	The CTO of the company and PriMo's product owner were interested in the possibility of using a real time roadmap to keep track of the work done while not going as in deep as seeing the tasks assigned to each developer.	
	
\section{How are these tools being used}
	
	%I prefer to use more soft and vague statements, like "Even if Athonet does not go for a pure agile development's model, the tools can still help to improve the organization of their work. In fact, the tools fits their current needs, which reflect an hybrid model between Scrum and Kanban: Scrumban"
	
	Athonet does not want to pursue being an Agile software developing company in the near future, but it wants the tools that allow to organize their projects such that if one day their strategy varies, then the software would follow along.
	What they really want adopt now is a hybrid between Scrum and Kanban: Scrumban.\\	
	As in Kanban visualizing workflow, limiting work in process (WIP), and measuring productivity are prioritized.	
	Scrumban removes the practice of limiting WIP by time (i.e. velocity and Sprint boundary) and replaces it by limiting WIP for each stage.
	It's based on having a continuous flow of work, which is what Athonet has for their products.\\	
	%todo citare
	%https://www.atlassian.com/agile/kanban/kanplan
%	In Jira this aproach is called kanplan and it's well doucumented on.
	